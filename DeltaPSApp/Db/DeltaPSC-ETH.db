#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBDEND


# Short and long form of identification string
record(stringin, "$(device):Info:IDN") {
  field(DESC, "SCPI identification string")
  field(DTYP, "stream")
  field(SCAN, "10 second")
  field(INP, "@DeltaPSC-ETH.proto getIDN() $(PORT) $(A)")
  field(PINI, "YES")
  field(TPRO, "0")
}

record(ai, "$(device):Voltage:Readback") {
  field(DESC, "Get Output Voltage Readback")
  field(SCAN, "$(scan) second")
  field(DTYP, "stream")
  field(INP, "@DeltaPSC-ETH.proto getF(MEAS:VOLT?) $(PORT) $(A)")
  field(PINI, "YES")
  field(PREC, "$(prec)")
  field(EGU, "V")
  field(HOPR, "$(v_max)")
  field(LOPR, "$(v_min)")
  field(TPRO, "0")
}

record(ai, "$(device):Voltage:Setpoint:Get") {
  field(DESC, "Get Setpoint for Output Voltage")
  field(SCAN, "$(scan) second")
  field(DTYP, "stream")
  field(INP, "@DeltaPSC-ETH.proto getF(SOUR:VOLT?) $(PORT) $(A)")
  field(PINI, "1")
  field(PREC, "$(prec)")
  field(EGU, "V")
  field(HOPR, "$(v_max)")
  field(LOPR, "$(v_min)")
  field(FLNK, "$(device):Status:int_On PP NMS")
  field(TPRO, "0")
}

record(ao, "$(device):Voltage:Setpoint") {
  field(DESC, "Setpoint for Output Voltage")
  field(DTYP, "stream")
  field(OUT, "@DeltaPSC-ETH.proto setFCtrl(SOUR:VOLT,SOUR:CURR,${c_ctrl}) $(PORT) $(A)")
  field(FLNK, "$(device):int_fanout")
  field(PREC, "$(prec)")
  field(VAL, "0")
  field(EGU, "V")
  field(HOPR, "$(v_max)")
  field(LOPR, "$(v_min)")
  field(DRVH, "$(v_max)")
  field(DRVL, "$(v_min)")
  field(TPRO, "0")
}

record(ai, "$(device):Current:Readback") {
  field(DESC, "Get Output Current")
  field(SCAN, "$(scan) second")
  field(DTYP, "stream")
  field(INP, "@DeltaPSC-ETH.proto getF(MEAS:CURR?) $(PORT) $(A)")
  field(PINI, "1")
  field(PREC, "$(prec)")
  field(EGU, "A")
  field(HOPR, "$(c_max)")
  field(LOPR, "$(c_min)")
  field(TPRO, "0")
}

record(ai, "$(device):Current:Setpoint:Get") {
  field(DESC, "Get Setpoint for Output Current")
  field(SCAN, "$(scan) second")
  field(DTYP, "stream")
  field(INP, "@DeltaPSC-ETH.proto getF(SOUR:CURR?) $(PORT) $(A)")
  field(PINI, "YES")
  field(PREC, "$(prec)")
  field(EGU, "A")
  field(HOPR, "$(c_max)")
  field(LOPR, "$(c_min)")
  field(FLNK, "$(device):Status:int_On PP NMS")
  field(TPRO, "0")
}

record(ao, "$(device):Current:Setpoint") {
  field(DESC, "Setpoint for Output Current")
  field(DTYP, "stream")
  field(OUT, "@DeltaPSC-ETH.proto setFCtrl(SOUR:CURR,SOUR:VOLT,${v_ctrl}) $(PORT) $(A)")
  field(FLNK, "$(device):int_fanout")
  field(PREC, "$(prec)")
  field(EGU, "A")
  field(VAL, "0")
  field(HOPR, "$(c_max)")
  field(LOPR, "$(c_min)")
  field(DRVH, "$(c_max)")
  field(DRVL, "$(c_min)")
  field(TPRO, "0")
}

record(dfanout, "$(device):Current:Sync") {
  field(SELM, "All")
  field(OMSL, "closed_loop")
  field(DOL,  "$(device):Current:Setpoint:Get.VAL NPP MSS")
  field(OUTA, "$(device):Current:Setpoint PP")
  field(TPRO, "0")
}

record(fanout, "$(device):int_fanout") {
  field(LNK1, "$(device):Voltage:Setpoint:Get")
  field(LNK2, "$(device):Voltage:Readback")
  field(LNK3, "$(device):Current:Setpoint:Get")
  field(LNK4, "$(device):Current:Readback")
}

record(mbbiDirect, "$(device):Status") {
  field(DESC, "Status")
  field(INP, "$(device):Status:int_Sum.VAL NPP MSS")
  field(FLNK, "$(device):int_ErrorSum")
}

record(calc, "$(device):int_ErrorSum") {
  field(SCAN, "Passive")
  field(CALC, "(((8+16+64+128+256+512+1024+2048+4096)&A)!=0)|B!=0")
  field(INPA, "$(device):Status.VAL NPP MSS")
  field(INPB, "$(device):Status.SEVR NPP MSS")
  field(FLNK, "$(device):Status:ErrorSum PP MSS")
  field(TPRO, "0")
}

record(bi, "$(device):Status:ErrorSum") {
  field(DESC, "Device has errors")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):int_ErrorSum.VAL NPP MSS")
  field(FLNK, "$(device):Status:Bit0 PP NMS")
  field(TPRO, "0")
}

record(longin, "$(device):Status:On") {
  field(DESC, "Status")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status:int_On.VAL NPP MSS")
  field(FLNK, "$(device):Status:int_Sum PP NMS")
  field(TPRO, "0")
}

record(calc, "$(device):Status:int_On") {
  field(SCAN, "Passive")
  field(CALC, "A>0")
  field(INPA, "$(device):Voltage:Setpoint:Get.VAL NPP MSS")
  field(FLNK, "$(device):Status:On PP MSS")
  field(TPRO, "0")
}

record(bo, "$(device):Cmd:Reset") {
  field(DTYP, "stream")
  field(OUT, "@DeltaPSC-ETH.proto cmd(*RST) $(PORT) $(A)")
  field(FLNK, "$(device):Status:int_On PP NMS")
  field(TPRO, "0")
}

record(bo, "$(device):Cmd:On") {
  field(FLNK, "$(device):Cmd:int_On PP NMS")
  field(TPRO, "0")
}

record(bo, "$(device):Cmd:Off") {
  field(FLNK, "$(device):Cmd:int_Off PP NMS")
  field(TPRO, "0")
}

record(ao, "$(device):Cmd:int_On") {
  field(OMSL, "closed_loop")
  field(DOL,  "$(device):Current:Setpoint.VAL")
  field(OUT,  "$(device):Current:Setpoint PP")
  field(FLNK, "$(device):Status:int_On PP NMS")
  field(TPRO, "0")
}

record(ao, "$(device):Cmd:int_Off") {
  field(OMSL, "closed_loop")
  field(VAL,  "0")
  field(OUT,  "$(device):Voltage:Setpoint PP")
  field(FLNK, "$(device):Cmd:int_Off1 PP NMS")
  field(TPRO, "0")
}

record(ao, "$(device):Cmd:int_Off1") {
  field(OMSL, "closed_loop")
  field(DOL,  "$(device):Current:Setpoint.VAL")
  field(OUT,  "$(device):Current:Setpoint:int_Off PP")
  field(FLNK, "$(device):Status:int_On PP NMS")
  field(TPRO, "0")
}

record(ao, "$(device):Current:Setpoint:int_Off") {
  field(DTYP, "stream")
  field(OUT, "@DeltaPSC-ETH.proto setFCtrl(SOUR:CURR,SOUR:VOLT,0) $(PORT) $(A)")
  field(TPRO, "0")
}

record(mbbiDirect, "$(device):Status:int_OperRegu") {
  field(DESC, "Operation Regulating Register")
  field(DTYP, "stream")
  field(SCAN, "$(scan) second")
  field(INP,  "@DeltaPSC-ETH.proto getD(STAT:OPER:REGU:COND?) $(PORT) $(A)")
  field(FLNK, "$(device):Status:int_OperRcon")
}

record(mbbiDirect, "$(device):Status:int_OperRcon") {
  field(DESC, "Operation Remote-Control Register")
  field(DTYP, "stream")
  field(INP,  "@DeltaPSC-ETH.proto getD(STAT:OPER:RCON:COND?) $(PORT) $(A)")
  field(FLNK, "$(device):Status:int_OperShutProt")
}

record(mbbiDirect, "$(device):Status:int_OperShutProt") {
  field(DESC, "Operation Shutdown Protection Register")
  field(DTYP, "stream")
  field(INP,  "@DeltaPSC-ETH.proto getD(STAT:OPER:SHUT:PROT:COND?) $(PORT) $(A)")
  field(FLNK, "$(device):Status:int_OperShut")
}

record(mbbiDirect, "$(device):Status:int_OperShut") {
  field(DESC, "Operation Shutdown Register")
  field(DTYP, "stream")
  field(INP,  "@DeltaPSC-ETH.proto getD(STAT:OPER:SHUT:COND?) $(PORT) $(A)")
  field(FLNK, "$(device):Status:int_QuesVolt")
}

record(mbbiDirect, "$(device):Status:int_QuesVolt") {
  field(DESC, "Questionable Voltage Register")
  field(DTYP, "stream")
  field(INP,  "@DeltaPSC-ETH.proto getD(STAT:QUES:VOLT:COND?) $(PORT) $(A)")
  field(FLNK, "$(device):Status:int_QuesCurr")
}

record(mbbiDirect, "$(device):Status:int_QuesCurr") {
  field(DESC, "Questionable Current Register")
  field(DTYP, "stream")
  field(INP,  "@DeltaPSC-ETH.proto getD(STAT:QUES:CURR:COND?) $(PORT) $(A)")
  field(FLNK, "$(device):Status:int_A")
}

record(calc, "$(device):Status:int_A") {
  field(CALC, "(A?1:0)+(B?2:0)+(C?4:0)+(D?8:0)")
  field(INPA, "$(device):Status:int_OperRegu.B0 NPP MSS")
  field(INPB, "$(device):Status:int_OperRegu.B1 NPP MSS")
  field(INPC, "$(device):Status:int_OperRcon.B1 NPP MSS")
  field(INPD, "$(device):Status:int_QuesVolt.B0 NPP MSS")
  field(FLNK, "$(device):Status:int_B")
}

record(calc, "$(device):Status:int_B") {
  field(CALC, "((A?1:0)+(B?2:0)+(C?4:0)+(D?8:0))*16")
  field(INPA, "$(device):Status:int_QuesCurr.B0 NPP MSS")
  field(INPB, "$(device):Status:int_OperRcon.B2 NPP MSS")
  field(INPC, "$(device):Status:int_QuesVolt.B1 NPP MSS")
  field(INPD, "$(device):Status:int_OperShutProt.B1 NPP MSS")
  field(FLNK, "$(device):Status:int_C")
}

record(calc, "$(device):Status:int_C") {
  field(CALC, "((A?1:0)+(B?2:0)+(C?4:0)+(D?8:0))*256")
  field(INPA, "$(device):Status:int_OperShutProt.B0 NPP MSS")
  field(INPB, "$(device):Status:int_OperShutProt.B2 NPP MSS")
  field(INPC, "$(device):Status:int_OperShutProt.B3 NPP MSS")
  field(INPD, "$(device):Status:int_OperShut.B1 NPP MSS")
  field(FLNK, "$(device):Status:int_D")
}

record(calc, "$(device):Status:int_D") {
  field(CALC, "((A?1:0)+(B?2:0)+(C?4:0)+(D?8:0))*4096")
  field(INPA, "$(device):Status:int_OperShut.B2 NPP MSS")
  field(INPB, "$(device):Status:int_OperShut.B3 NPP MSS")
  field(INPC, "$(device):Status:int_OperRcon.B3 NPP MSS")
  field(INPD, "0")
  field(FLNK, "$(device):Status:int_Sum")
}

record(calc, "$(device):Status:int_Sum") {
  field(CALC, "A+B+C+D")
  field(INPA, "$(device):Status:int_A.VAL NPP MSS")
  field(INPB, "$(device):Status:int_B.VAL NPP MSS")
  field(INPC, "$(device):Status:int_C.VAL NPP MSS")
  field(INPD, "$(device):Status:int_D.VAL NPP MSS")
  field(FLNK, "$(device):Status")
}

record(stringin, "$(device):Info:Alias") {
  field(DESC, "Alternative device name")
  field(SCAN, "Passive")
  field(DTYP, "Soft Channel")
  field(VAL, "$(alias)")
}

record(bi, "$(device):Info:HasDelegates") {
  field(DESC, "Device is master device for slaves")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(VAL, "0")
}

record(mbbi, "$(device):Status:Strings") {
  field(DESC, "Descriptions of status bits")
  field(SCAN, "Passive")
  field(DTYP, "Soft Channel")
  field(NOBT, "16")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(TVVL, "12")
  field(TTVL, "13")
  field(FTVL, "14")
  field(FFVL, "15")
  field(ZRST, "Ctrl Volt")
  field(ONST, "Ctrl Curr")
  field(TWST, "Remote Volt")
  field(THST, "Volt lim")
  field(FRST, "Curr lim")
  field(FVST, "Remote Curr")
  field(SXST, "DC Out Fail")
  field(SVST, "Hot")
  field(EIST, "Over Temp")
  field(NIST, "PowSink OverLo")
  field(TEST, "AC In Fail")
  field(ELST, "Interlock")
  field(TVST, "Rem ShDdown")
  field(TTST, "Output ON")
  field(FTST, "Front panel lock")
  field(FFST, "N/A")
}

record(bi, "$(device):Status:Bit0") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status.B0 NPP MSS")
  field(FLNK, "$(device):Status:Bit1 PP NMS")
  field(DESC, "Constant Volt")
  field(ZSV, "NO_ALARM")
  field(OSV, "NO_ALARM")
  field(TPRO, "0")
}

record(bi, "$(device):Status:Bit1") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status.B1 NPP MSS")
  field(FLNK, "$(device):Status:Bit2 PP NMS")
  field(DESC, "Constant Current")
  field(ZSV, "NO_ALARM")
  field(OSV, "NO_ALARM")
  field(TPRO, "0")
}

record(bi, "$(device):Status:Bit2") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status.B2 NPP MSS")
  field(FLNK, "$(device):Status:Bit3 PP NMS")
  field(DESC, "Rem CV")
  field(ZSV, "NO_ALARM")
  field(OSV, "NO_ALARM")
  field(TPRO, "0")
}

record(bi, "$(device):Status:Bit3") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status.B3 NPP MSS")
  field(FLNK, "$(device):Status:Bit4 PP NMS")
  field(DESC, "Volt Limit")
  field(ZSV, "NO_ALARM")
  field(OSV, "MAJOR")
  field(TPRO, "0")
}

record(bi, "$(device):Status:Bit4") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status.B4 NPP MSS")
  field(FLNK, "$(device):Status:Bit5 PP NMS")
  field(DESC, "Curr Limit")
  field(ZSV, "NO_ALARM")
  field(OSV, "MAJOR")
  field(TPRO, "0")
}

record(bi, "$(device):Status:Bit5") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status.B5 NPP MSS")
  field(FLNK, "$(device):Status:Bit6 PP NMS")
  field(DESC, "Rem CC")
  field(ZSV, "NO_ALARM")
  field(OSV, "NO_ALARM")
  field(TPRO, "0")
}

record(bi, "$(device):Status:Bit6") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status.B6 NPP MSS")
  field(FLNK, "$(device):Status:Bit7 PP NMS")
  field(DESC, "DC Out Fail")
  field(ZSV, "NO_ALARM")
  field(OSV, "NO_ALARM")
  field(TPRO, "0")
}

record(bi, "$(device):Status:Bit7") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status.B7 NPP MSS")
  field(FLNK, "$(device):Status:Bit8 PP NMS")
  field(DESC, "Hot")
  field(ZSV, "NO_ALARM")
  field(OSV, "MINOR")
  field(TPRO, "0")
}

record(bi, "$(device):Status:Bit8") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status.B8 NPP MSS")
  field(FLNK, "$(device):Status:Bit9 PP NMS")
  field(DESC, "Over Temp")
  field(ZSV, "NO_ALARM")
  field(OSV, "MAJOR")
  field(TPRO, "0")
}

record(bi, "$(device):Status:Bit9") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status.B9 NPP MSS")
  field(FLNK, "$(device):Status:Bit10 PP NMS")
  field(DESC, "PwrSink OvrLoad")
  field(ZSV, "NO_ALARM")
  field(OSV, "MAJOR")
  field(TPRO, "0")
}

record(bi, "$(device):Status:Bit10") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status.BA NPP MSS")
  field(FLNK, "$(device):Status:Bit11 PP NMS")
  field(DESC, "AC In Fail")
  field(ZSV, "NO_ALARM")
  field(OSV, "MAJOR")
  field(TPRO, "0")
}

record(bi, "$(device):Status:Bit11") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status.BB NPP MSS")
  field(FLNK, "$(device):Status:Bit12 PP NMS")
  field(DESC, "Interlock")
  field(ZSV, "NO_ALARM")
  field(OSV, "MAJOR")
  field(TPRO, "0")
}

record(bi, "$(device):Status:Bit12") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status.BC NPP MSS")
  field(FLNK, "$(device):Status:Bit13 PP NMS")
  field(DESC, "Rem Shutdown")
  field(ZSV, "NO_ALARM")
  field(OSV, "NO_ALARM")
  field(TPRO, "0")
}

record(bi, "$(device):Status:Bit13") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status.BD NPP MSS")
  field(FLNK, "$(device):Status:Bit14 PP NMS")
  field(DESC, "Output ON")
  field(ZSV, "NO_ALARM")
  field(OSV, "NO_ALARM")
  field(TPRO, "0")
}

record(bi, "$(device):Status:Bit14") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status.BE NPP MSS")
  field(FLNK, "$(device):Status:Bit15 PP NMS")
  field(DESC, "Front panel lock")
  field(ZSV, "NO_ALARM")
  field(OSV, "NO_ALARM")
  field(TPRO, "0")
}

record(bi, "$(device):Status:Bit15") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP, "$(device):Status.BF NPP MSS")
  field(DESC, "N/A")
  field(ZSV, "NO_ALARM")
  field(OSV, "NO_ALARM")
  field(TPRO, "0")
}


#! Further lines contain data used by VisualDCT
#! View(2042,0,1.0)
#! Record("$(device):Status:IDN",24,14,0,0,"$(device):Status:IDN")
#! Record("$(device):SwitchRemote",272,22,0,0,"$(device):SwitchRemote")
#! Record("$(device):Cmd:Reset",520,22,0,0,"$(device):Cmd:Reset")
#! Record("$(device):Voltage:Readback",768,19,0,1,"$(device):Voltage:Readback")
#! Record("$(device):Voltage:Setpoint:Get",1016,19,0,1,"$(device):Voltage:Setpoint:Get")
#! Record("$(device):Voltage:Setpoint",1260,19,0,0,"$(device):Voltage:Setpoint")
#! Field("$(device):Voltage:Setpoint.FLNK",16777215,1,"$(device):Voltage:Setpoint.FLNK")
#! Link("$(device):Voltage:Setpoint.FLNK","$(device):int_fanout")
#! Record("$(device):Current:Readback",1512,19,0,0,"$(device):Current:Readback")
#! Record("$(device):Current:Setpoint:Get",1760,19,0,1,"$(device):Current:Setpoint:Get")
#! Record("$(device):Current:Setpoint",2008,39,0,0,"$(device):Current:Setpoint")
#! Field("$(device):Current:Setpoint.FLNK",16777215,0,"$(device):Current:Setpoint.FLNK")
#! Link("$(device):Current:Setpoint.FLNK","$(device):int_fanout")
#! Record("$(device):Status",2256,20,0,0,"$(device):Status")
#! Field("$(device):Status.FLNK",16777215,1,"$(device):Status.FLNK")
#! Link("$(device):Status.FLNK","$(device):int_ErrorSum")
#! Field("$(device):Status.VAL",16777215,0,"$(device):Status.VAL")
#! Record("$(device):int_fanout",1720,288,0,0,"$(device):int_fanout")
#! Field("$(device):int_fanout.LNK1",16777215,0,"$(device):int_fanout.LNK1")
#! Link("$(device):int_fanout.LNK1","$(device):Voltage:Setpoint:Get")
#! Field("$(device):int_fanout.LNK2",16777215,0,"$(device):int_fanout.LNK2")
#! Link("$(device):int_fanout.LNK2","$(device):Voltage:Readback")
#! Field("$(device):int_fanout.LNK3",16777215,1,"$(device):int_fanout.LNK3")
#! Link("$(device):int_fanout.LNK3","$(device):Current:Setpoint:Get")
#! Field("$(device):int_fanout.LNK4",16777215,0,"$(device):int_fanout.LNK4")
#! Link("$(device):int_fanout.LNK4","$(device):Current:Readback")
#! Record("$(device):int_ErrorSum",2520,68,0,0,"$(device):int_ErrorSum")
#! Field("$(device):int_ErrorSum.INPA",16777215,0,"$(device):int_ErrorSum.INPA")
#! Link("$(device):int_ErrorSum.INPA","$(device):Status.VAL")
#! Field("$(device):int_ErrorSum.FLNK",16777215,1,"$(device):int_ErrorSum.FLNK")
#! Link("$(device):int_ErrorSum.FLNK","$(device):ErrorSum")
#! Field("$(device):int_ErrorSum.VAL",16777215,0,"$(device):int_ErrorSum.VAL")
#! Record("$(device):ErrorSum",2780,108,0,0,"$(device):ErrorSum")
#! Field("$(device):ErrorSum.INP",16777215,0,"$(device):ErrorSum.INP")
#! Link("$(device):ErrorSum.INP","$(device):int_ErrorSum.VAL")
